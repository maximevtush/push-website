---
id: docs-chain-build-create-universal-signer-alt
title: Create Universal Signer Alt
hide_title: true
slug: ./create-universal-signer-alt
displayed_sidebar: pushChainSidebar
sidebar_position: 2
image: '/assets/docs/previews/docs_notifications_develop_fetch_chats--create_channel.png'
---

# Create a Universal Signer

Wrap any EVM or non-EVM signer (ethers, viem, Solana, etc.) into a `UniversalSigner` so you can send cross-chain transactions on Push Chain without touching your on-chain code.

> **Prerequisite**  
> Remember to install and import required libraries. See [Quickstart](/docs/chain/quickstart) for install steps.

<head>
  <title>{`Create Universal Signer | Push Chain | Push Documentation`}</title>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Details from '@theme/Details';
import NodeJSVirtualIDE from '@site/src/components/NodeJSVirtualIDE/NodeJSVirtualIDE';

## Create Universal Signer API

The most common way to create a Universal Signer is by converting an existing signer from supported libraries (Ethers, Viem, Solana).

**_`PushChain.utils.signer.toUniversal(signer): Promise<UniversalSigner>`_**

| **Function Arguments**  | **Type**                                                            | **Description**                                      |
| ----------------------- | ------------------------------------------------------------------- | ---------------------------------------------------- |
| _`signer`_              | `viem.WalletClient` \| `ethers.Wallet` \| `UniversalSignerSkeleton` | The signer to convert to Universal Signer format.    |

> Note: Parameters _`in this style`_ are mandatory.

<Details summary="Expected response">

```typescript
// UniversalSigner object
{
  account: {
    address: '0x...',
    chain: 'ethereum_sepolia' // or other supported chains
  },
  signMessage: Function,
  signTransaction: Function,
  signTypedData: Function
}
```

</Details>

<Tabs groupId="create-universal-signer">
  <TabItem value='ethers_v6' label='Ethers (V6)' default>

<NodeJSVirtualIDE 
  repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-examples/tree/main/sdk-functions/create-universal-signer"}}
>

{`

    // customPropHighlightRegexStart=PushChain\.utils\.signer\.toUniversal
    // Import Push Chain Core
    import { PushChain } from '@pushchain/core';
    import { ethers } from 'ethers';

    async function main() {
      console.log('Creating Universal Signer - Ethers V6');

      // Create random wallet
      const wallet = ethers.Wallet.createRandom();

      // Set up provider
      // Replace it with different JsonRpcProvider to target Ethereum Account, BNB Account, etc
      // const provider = new ethers.JsonRpcProvider('https://gateway.tenderly.co/public/sepolia');
      const provider = new ethers.JsonRpcProvider('https://evm.rpc-testnet-donut-node1.push.org/');
      const signer = wallet.connect(provider);

      // Convert ethers signer to Universal Signer
      const universalSigner = await PushChain.utils.signer.toUniversal(signer);
      console.log('ðŸ”‘ Got universal signer - Ethers');
      console.log(JSON.stringify(universalSigner));
    }

    await main().catch(console.error);

`}

</NodeJSVirtualIDE>

  </TabItem>

  <TabItem value='viem' label='Viem'>

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-examples/tree/main/sdk-functions/create-universal-signer"}}>

{`

    // customPropHighlightRegexStart=PushChain\.utils\.signer\.toUniversal
    // customPropHighlightRegexEnd=\;
    // Import Push Chain Core
    import { PushChain } from '@pushchain/core';

    // Import Viem
    import { createWalletClient, http } from 'viem';
    import { generatePrivateKey, privateKeyToAccount } from 'viem/accounts';
    import { sepolia } from 'viem/chains';

    async function main() {
      // Create random wallet
      const account = privateKeyToAccount(generatePrivateKey());

      // set chain to sepolia
      const walletClient = createWalletClient({
        account,
        transport: http('https://evm.rpc-testnet-donut-node1.push.org/'),
      });

      // Convert viem signer to Universal Signer
      const universalSigner = await PushChain.utils.signer.toUniversal(walletClient);
      console.log('ðŸ”‘ Got universal signer - Viem');
      console.log(JSON.stringify(universalSigner));
    }

    await main().catch(console.error);

`}

</NodeJSVirtualIDE>

:::note Provider determines the chain of the account

- RPC URL picks the chain â€“ Sepolia RPC â†’ Ethereum Sepolia, Donut RPC â†’ Push Chain Testnet

:::

  </TabItem>

  <TabItem value='solana_web3js' label='Web3 JS (Solana)'>

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-examples/tree/main/sdk-functions/create-universal-signer"}}>

{`

    // customPropHighlightRegexStart=PushChain\.utils\.signer\.toUniversalFromKeyPair
    // customPropHighlightRegexEnd=\\)
    // Import Push Chain Core
    import { PushChain } from '@pushchain/core';

    // Import Solana Web3 JS
    import { Keypair } from '@solana/web3.js';

    async function main() {
      // Create random wallet
      const solKeypair = Keypair.generate();

      // Convert solana signer to Universal Signer
      const universalSigner = await PushChain.utils.signer.toUniversalFromKeyPair(
        solKeypair,
        {
          chain: PushChain.CONSTANTS.CHAIN.SOLANA_DEVNET,
          library: PushChain.CONSTANTS.LIBRARY.SOLANA_WEB3JS,
        }
      );
      console.log('ðŸ”‘ Got universal signer');
      console.log(JSON.stringify(universalSigner));
    }

    await main().catch(console.error);

`}

</NodeJSVirtualIDE>

:::note Provider determines the chain of the account

- RPC URL picks the chain â€“ Sepolia RPC â†’ Ethereum Sepolia, Donut RPC â†’ Push Chain Testnet

:::

  </TabItem>

  <TabItem value='ui_kit' label='UI Kit (Frontend / Abstracted)'>
  Using [UI Kit / UI Components](/docs/chain/ui-components/) will abstract away creation of the Universal Signer.
  
    ```jsx live
    // customPropHighlightRegexStart=<PushUniversalWalletProvider
    // customPropHighlightRegexEnd=</PushUniversalWalletProvider>
    // customPropMinimized='false'
    // Import necessary components from @pushchain/ui-kit
    import {
      PushUniversalWalletProvider,
      PushUniversalAccountButton,
      usePushWalletContext,
      usePushChainClient,
      PushUI,
    } from '@pushchain/ui-kit';

    function App() {
      // Define Wallet Config
      const walletConfig = {
        network: PushUI.CONSTANTS.PUSH_NETWORK.TESTNET,
      };

      function Component() {
        const { connectionStatus } = usePushWalletContext();
        const { pushChainClient } = usePushChainClient();

        return (
          <div>
            <PushUniversalAccountButton />

            {connectionStatus == 'connected' &&
              <p>Push Chain Client Initialized with Universal Signer: ${JSON.stringify(pushChainClient)}</p>
            }
          </div>
        );
      }

      return (
        <PushUniversalWalletProvider config={walletConfig}>
          <Component />
        </PushUniversalWalletProvider>
      );
    }
    ```

  </TabItem>
</Tabs>

---

## Custom Universal Signer API

If you don't have a supported library signer or want to create a custom implementation, you can construct a Universal Signer manually.

**_`PushChain.utils.signer.construct(account, {options}): Promise<UniversalSigner>`_**

| **Function Arguments**               | **Type**                                          | **Description**                                        |
| ------------------------------------ | ------------------------------------------------- | ------------------------------------------------------ |
| _`account`_                          | `UniversalAccount`                                | Account information containing address and chain       |
| _`options`_                          | `Object`                                          | Object containing the signing function implementations |
| _`options.signAndSendTransaction`_   | `(unsignedTx: Uint8Array) => Promise<Uint8Array>` | Function to sign transaction data                      |
| _`options.signMessage`_              | `(data: Uint8Array) => Promise<Uint8Array>`       | Function to sign raw message data                      |
| `options.signTypedData`              | `(params) => Promise<Uint8Array>`                 | Function to sign typed data (EIP-712)                  |

> Note: Parameters _`in this style`_ are mandatory.

<Details summary="Expected response">

```typescript
// UniversalSignerSkeleton object
{
  signerId: 'CustomGeneratedSigner',
  account: {
    address: '0xeCba9a32A9823f1cb00cdD8344Bf2D1d87a8dd97',
    chain: 'ethereum_sepolia'
  },
  signMessage: Function,
  signTransaction: Function,
  signTypedData: Function
}
````

</Details>

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-examples/tree/main/sdk-functions/custom-universal-signer"}}>

{`
    // customPropHighlightRegexStart== PushChain\.utils\.signer\.construct
    // customPropHighlightRegexEnd=\\);
    // Import Push Chain Core
    import { PushChain } from '@pushchain/core';

    // Import if you are using ethers
    import { ethers } from 'ethers';
    import readline from 'readline';

    async function main() {
      // We need to pass the following to PushChain.utils.signer.construct(account, {options})
      // 1. account which is a universal account
      // 2. options which is an object with the following properties
      // 2.1 signAndSendTransaction
      // 2.2 signMessage
      // 2.3 signTypedData

      // 1. account to universal account
      // Create random wallet
      const wallet = ethers.Wallet.createRandom();
      
      // Convert wallet.address to Universal Account
      const universalAccount = PushChain.utils.account.toUniversal(wallet.address, {
        chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
      });
      console.log('Created Universal Account', JSON.stringify(universalAccount))

      // 2. options to construct
      // 2.1 signAndSendTransaction
      
      // create custom Sign and Send Transaction
      const customSignAndSendTransaction = async (unsignedTx) => {
        // Sign the transaction using ethers wallet
        const signedTx = await wallet.signTransaction(unsignedTx);
        const sendTx = await wallet.sendTransaction(signedTx);

        // Always a Uint8Array
        return Uint8Array.from(sendTx);
      };

      // 2.2 signMessage
      const customSignMessage = async (message) => {
        // Sign message using ethers wallet
        const signature = await wallet.signMessage(message);

        // Always a Uint8Array
        return Uint8Array.from(signature);
      };
      
      // 2.3 signMessage
      const customSignTypedData = async (domain, types, value) => {
        // Sign typed data using ethers wallet
        const signature = await wallet._signTypedData(domain, types, value);

        // Always a Uint8Array
        return Uint8Array.from(signature);
      };
      
      // * Construct the universal signer skeleton with custom signing functions
      const universalSignerSkeleton = PushChain.utils.signer.construct(universalAccount, {
        signAndSendTransaction: customSignAndSendTransaction,
        signMessage: customSignMessage,
        signTypedData: customSignTypedData
      });
      console.log('Created Universal Signer Skeleton', JSON.stringify(universalSignerSkeleton));
      

      // ** Pass constructed universal signer skeleton to create universal signer **
      const universalSigner = await PushChain.utils.signer.toUniversal(universalSignerSkeleton);
      console.log('Created Universal Signer', JSON.stringify(universalSigner));
    }
    await main().catch(console.error);
                                                                                                                               
`}

</NodeJSVirtualIDE>