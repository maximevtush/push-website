---
id: docs-chain-build-utility-functions
title: Utility Functions
hide_title: true
slug: ./utility-functions
displayed_sidebar: pushChainSidebar
sidebar_position: 6
image: '/assets/docs/previews/docs_notifications_develop_fetch_chats--create_channel.png'
---

# Utility Functions Overview

This section covers utility functions provided by the SDK to ease the interaction with core Push Chain functionality.

<head>
  <title>{`Utility Functions | Push Chain | Push Documentation`}</title>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import ReactPlayer from 'react-player';
import {
  ModalContainer,
  ModalSmall,
  ModalWrapper,
  ModalMidEqual,
  AFocus,
  AImp,
} from '@site/src/css/SharedStyling';
import NodeJSVirtualIDE from '@site/src/components/NodeJSVirtualIDE/NodeJSVirtualIDE';

## From Chain Agnostic Address to Universal Account

```typescript
const account = PushChain.utils.account.fromChainAgnostic(chainAgnosticAddress)
```


### fromChainAgnostic parameters

| **Param**              | **Type** | **Default** | **Remarks**                                                                                                |
| ---------------------- | -------- | ----------- | ---------------------------------------------------------------------------------------------------------- |
| `chainAgnosticAddress` | `string` | -           | A full chain agnostic address string (e.g., `eip155:11155111:0x35B84d6848D16415177c64D64504663b998A6ab4`). |

#### Example: Convert Ethereum Sepolia CAIP-10 to UniversalAccount

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>

{`
    import { PushChain } from '@pushchain/core'

    function main() {
      const account = PushChain.utils.account.fromChainAgnostic(
        'eip155:11155111:0xD8d6aF611a17C236b13235B5318508FA61dE3Dba'
        )
        console.log(JSON.stringify(account, null, 2))
    }

    main()
`}

</NodeJSVirtualIDE>

## Create Universal Account from Address and Chain

```typescript
const account = PushChain.utils.account.toUniversal(address, {
  chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
});
```

### `toUniversal` parameters

| **Param**       | **Type** | **Default** | **Remarks**                                                                                                                                                                                            |
| --------------- | -------- | ----------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `address`       | `string` | -           | An address string (e.g., `0xabc...`).                                                                                                                                                                  |
| `options.chain` | `CHAIN`  | -           | The target chain for the signer. Here are some possible values: `PushChain.CONSTANTS.CHAIN.ETHEREUM_MAINNET`, `PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA`, `PushChain.CONSTANTS.CHAIN.SOLANA_MAINNET` |

#### Example: Convert Ethereum Sepolia Address to UniversalAccount

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>

{`
    import { PushChain } from '@pushchain/core'

    function main() {
      const account = PushChain.utils.account.toUniversal(
        '0xD8d6aF611a17C236b13235B5318508FA61dE3Dba', {
          chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
        }
      )
      console.log(JSON.stringify(account, null, 2))
    }

    main()
`}
</NodeJSVirtualIDE>

## Convert Address and Chain to Chain Agnostic Address

```typescript
const chainAgnosticAddress = PushChain.utils.account.toChainAgnostic(address, {
  chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
});
```

### `toChainAgnostic` parameters

| **Param**       | **Type** | **Remarks**                                                                                                                                                                                            |
| --------------- | -------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `address`       | `string` | An address string (e.g., `0xabc...`).                                                                                                                                                                  |
| `options.chain` | `CHAIN`  | The target chain for the signer. Here are some possible values: `PushChain.CONSTANTS.CHAIN.ETHEREUM_MAINNET`, `PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA`, `PushChain.CONSTANTS.CHAIN.SOLANA_MAINNET` |

#### Example: Convert Ethereum Mainnet Address to CAIP-10

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'

    function main() {
      const chainAgnosticAddress = PushChain.utils.account.toChainAgnostic(
        '0xD8d6aF611a17C236b13235B5318508FA61dE3Dba', {
          chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
        }
      )
      console.log(JSON.stringify(chainAgnosticAddress, null, 2))
    }

    main()
`}

</NodeJSVirtualIDE>

## Convert Origin Account to Universal Executor Address

```typescript
const executorInfo = await PushChain.utils.account.convertOriginToExecutor(
  universalAccount,
  {
    status: true
  }
);
```

### `convertOriginToExecutor` parameters

| **Param**        | **Type**           | **Remarks**                                                                                                     |
| ---------------- | ------------------ | --------------------------------------------------------------------------------------------------------------- |
| `account`        | `UniversalAccount` | A UniversalAccount object containing chain and address information.                                             |
| `options.status` | `boolean`          | Whether to check if the computed smart account address is deployed. Set to `true` to include deployment status. |

#### Example: Convert Origin Account to Universal Executor Address

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'

    async function main() {
      // Create a universal account for Ethereum Sepolia
      const account = PushChain.utils.account.toUniversal(
        '0xD8d6aF611a17C236b13235B5318508FA61dE3Dba', {
          chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
        }
      )

      // Convert to executor address with deployment status
      const executorInfo = await PushChain.utils.account.convertOriginToExecutor(account, {
        status: true,
      })

      console.log(JSON.stringify(executorInfo, null, 2));

      // Convert without deployment status
      const executorSimple = await PushChain.utils.account.convertOriginToExecutor(account, {
        status: false,
      })

      console.log(JSON.stringify(executorSimple, null, 2));
    }

    main().catch(console.error)
`}

</NodeJSVirtualIDE>

## Create Universal Signer from Wallet Provider

```typescript 
const signer = await PushChain.utils.signer.toUniversal(signer) 
```

### `toUniversal` parameters

| **Param** | **Type**                                                                                | **Remarks**                                                                                                                                                                                                              |
| --------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `signer`  | `UniversalSignerSkeleton \| EthersV6SignerType \| EthersV5SignerType \| ViemSignerType` | A signer object from one of the supported libraries (ethers v5/v6, viem, or a custom UniversalSignerSkeleton). Here are some possible values: `ethers.Wallet`, `viem.Account`, `@pushchain/core.UniversalSignerSkeleton` |

#### Example: Create Universal Signer from Wallet Provider

<Tabs groupId="code-examples">
  <TabItem value='ethers_v6' label='Ethers (V6)' default>
  <NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'
    import { ethers } from 'ethers'

    async function main() {
      const provider = new ethers.JsonRpcProvider('https://sepolia.gateway.tenderly.co')
      const wallet = ethers.Wallet.createRandom(provider)

      const signer = await PushChain.utils.signer.toUniversal(wallet)

      console.log(JSON.stringify(signer, null, 2))
    }

    main().catch(console.error)
`}

</NodeJSVirtualIDE>
  </TabItem>
  <TabItem value='viem' label='Viem'>
    <NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'
    import { privateKeyToAccount, generatePrivateKey } from 'viem/accounts'
    import { createWalletClient, http } from 'viem'
    import { sepolia } from 'viem/chains'

    async function main() {
      const account = privateKeyToAccount(generatePrivateKey())
      const walletClient = createWalletClient({
        account,
        chain: sepolia,
        transport: http(),
      })

      const universalSigner = await PushChain.utils.signer.toUniversal(walletClient)

      console.log(JSON.stringify(universalSigner, null, 2))
    }

    main().catch(console.error)
`}

</NodeJSVirtualIDE>
  </TabItem>

  <TabItem value='solana_web3js' label='Web3 JS (Solana)'>

  For Solana, you need to use the `toUniversalFromKeyPair` function to create a Universal Signer. See the [Create Universal Signer from Key Pair](#create-universal-signer-from-key-pair) section for more details.

  </TabItem>
</Tabs>

## Create Universal Signer from Key Pair

```typescript
const universalSigner = await PushChain.utils.signer.toUniversalFromKeyPair(keypair, {
  chain: PushChain.CONSTANTS.CHAIN.SOLANA_DEVNET,
  library: PushChain.CONSTANTS.LIBRARY.SOLANA_WEB3JS,
})
```

### `toUniversalFromKeyPair` parameters

| **Param**         | **Type**  | **Remarks**                                                                                                                                                                                                 |
| ----------------- | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `keypair`         | `Keypair` | A keypair object from one of the supported libraries (ethers v5/v6, viem, or a custom UniversalSignerSkeleton)                                                                                              |
| `options.chain`   | `CHAIN`   | The target chain for the signer. Here are some possible values: `PushChain.CONSTANTS.CHAIN.ETHEREUM_MAINNET`, `PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA`, `PushChain.CONSTANTS.CHAIN.SOLANA_DEVNET`       |
| `options.library` | `LIBRARY` | The library to use for the signer. Here are some possible values: `PushChain.CONSTANTS.LIBRARY.ETHEREUM_ETHERSV6`, `PushChain.CONSTANTS.LIBRARY.ETHEREUM_VIEM`, `PushChain.CONSTANTS.LIBRARY.SOLANA_WEB3JS` |

#### Example: Create Universal Signer from Key Pair

<Tabs groupId="code-examples">
  <TabItem value='ethers_v6' label='Ethers (V6)' default>
      <NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'
    import { ethers } from 'ethers'

    async function main() {
      const provider = new ethers.JsonRpcProvider('https://sepolia.gateway.tenderly.co')
      const wallet = ethers.Wallet.createRandom(provider)

      const universalSigner = await PushChain.utils.signer.toUniversalFromKeyPair(wallet, {
        chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
        library: PushChain.CONSTANTS.LIBRARY.ETHEREUM_ETHERSV6,
      })

      console.log(JSON.stringify(universalSigner, null, 2))
    }

main().catch(console.error)

`}

</NodeJSVirtualIDE>
  </TabItem>
  <TabItem value='viem' label='Viem'>
  <NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'
    import { privateKeyToAccount, generatePrivateKey } from 'viem/accounts'
    import { createWalletClient, http } from 'viem'
    import { sepolia } from 'viem/chains'

    async function main() {
      const account = privateKeyToAccount(generatePrivateKey())
      const walletClient = createWalletClient({
        account,
        chain: sepolia,
        transport: http(),
      })

      const universalSigner = await PushChain.utils.signer.toUniversalFromKeyPair(walletClient, {
        chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
        library: PushChain.CONSTANTS.LIBRARY.ETHEREUM_VIEM,
      })

      console.log(JSON.stringify(universalSigner, null, 2))
    }

    main().catch(console.error)
`}

</NodeJSVirtualIDE>
  </TabItem>
  <TabItem value='solana_web3js' label='Web3 JS (Solana)'>
  <NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>

{`
    import { PushChain } from '@pushchain/core'
    import { Keypair } from '@solana/web3.js'

    async function main() {
      const keypair = Keypair.generate()

      const universalSigner = await PushChain.utils.signer.toUniversalFromKeyPair(keypair, {
        chain: PushChain.CONSTANTS.CHAIN.SOLANA_DEVNET,
        library: PushChain.CONSTANTS.LIBRARY.SOLANA_WEB3JS,
      })

      console.log(JSON.stringify(universalSigner, null, 2))
    }

    main().catch(console.error)
`}

</NodeJSVirtualIDE>
  </TabItem>
</Tabs>

## Create Universal Signer Manually

Creating a Universal Signer manually is useful when you want to use a custom signer that is not supported by the SDK.

This is a 2 step process:
1. Call `construct` function that will return a Universal Signer Skeleton
2. Pass the Universal Signer Skeleton to the `toUniversal` function to create a Universal Signer

For more information, please refer to the [Custom Universal Signer](./01-advanced/01-Custom-Universal-Signer.mdx) section.

```typescript
const universalSignerSkeleton = PushChain.utils.signer.construct(universalAccount, {
  signAndSendTransaction: customSignAndSendTransaction,
  signMessage: customSignMessage,
  signTypedData: customSignTypedData,
})
```

### `construct` parameters

| **Param**                    | **Type**                                                                                | **Remarks**                                                                                                                                                                                                              |
| ---------------------------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `account`                    | `UniversalAccount`                                                                      | A UniversalAccount object containing chain and address information.                                                                                                                                                      |
| `options.signMessage`        | `(data: Uint8Array) => Promise<Uint8Array>`                                            | A function that signs a message and returns the signature as Uint8Array.                                                                                                                                                 |
| `options.signAndSendTransaction` | `(unsignedTx: Uint8Array) => Promise<Uint8Array>`                                  | A function that signs and sends a transaction, returning the transaction hash as Uint8Array.                                                                                                                              |
| `options.signTypedData?`     | `({domain, types, primaryType, message}: {domain: TypedDataDomain; types: TypedData; primaryType: string; message: Record<string, any>}) => Promise<Uint8Array>` | An optional function that signs typed data according to EIP-712 standard.                                                                                                                                                |

#### Example: Create Universal Signer Manually

<NodeJSVirtualIDE repo={{title: "Open in Github", url: "https://github.com/push-protocol/push-chain-sdk"}}>
{`
    import { PushChain } from '@pushchain/core'
    import { ethers } from 'ethers'

    async function main() {
      const provider = new ethers.JsonRpcProvider('https://sepolia.gateway.tenderly.co')
      const wallet = ethers.Wallet.createRandom(provider)

      // Convert wallet.address to Universal Account
      const universalAccount = PushChain.utils.account.toUniversal(wallet.address, {
        chain: PushChain.CONSTANTS.CHAIN.ETHEREUM_SEPOLIA,
      })

      console.log('Creating signing functions for custom signer')
      const customSignAndSendTransaction = async (unsignedTx) => {
        const unsignedHex = hexlify(unsignedTx)
        const tx = ethers.Transaction.from(unsignedHex)
        const txResponse = await wallet.sendTransaction(tx)
        return hexToBytes(txResponse.hash)
      }

      const customSignMessage = async (message) => {
        // Sign message using ethers wallet
        const signature = await wallet.signMessage(message)

        // Always a Uint8Array
        return Uint8Array.from(signature)
      }

      // This is optional as solana doesn't support sign typed data
      const customSignTypedData = async (domain, types, value) => {
        // Sign typed data using ethers wallet
        const signature = await wallet._signTypedData(domain, types, value)

        // Always a Uint8Array
        return Uint8Array.from(signature)
      }

      // Construct the universal signer skeleton with custom signing functions
      const universalSignerSkeleton = PushChain.utils.signer.construct(universalAccount, {
        signAndSendTransaction: customSignAndSendTransaction,
        signMessage: customSignMessage,
        signTypedData: customSignTypedData,
      })

      console.log('Created Universal Signer with custom signing functions')

      console.log('Creating Universal Signer from Skeleton...')

      // Pass constructed universal signer skeleton to create universal signer
      const universalSigner = await PushChain.utils.signer.toUniversal(universalSignerSkeleton)
      console.log('Created Universal Signer', JSON.stringify(universalSigner, null, 2))
    }

main().catch(console.error)

`}

</NodeJSVirtualIDE>