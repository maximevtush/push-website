---
id: docs-chain-tutorials-universal-counter
title: Universal Counter App
hide_title: false
slug: ./tutorial-universal-counter
displayed_sidebar: pushChainSidebar
sidebar_position: 1
image: '/assets/docs/previews/notifications--intro_to_push_notification.png'
---

<head>
  <title>Universal Counter | Tutorials | Push Chain Docs</title>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import {
  ModalContainer,
  ModalSmall,
  ModalWrapper,
} from '@site/src/css/SharedStyling';
import IFrameModal from '@site/src/components/IFrameModal/IFrameModal';

<!-- Content Start -->

The Universal Counter is a simple example to show how to create a Universal App on Push Chain that is accessible from any chain and wallet. We will create a simple counter app that can be incremented from any chain and wallet and that tracks the overall count and individual counts for each chain (Ethereum, Solana, and Push Chain).

```jsx live
import React, { useState, useEffect } from 'react';
import { ethers } from 'ethers';
import {
  PushUniversalWalletProvider,
  PushUniversalAccountButton,
  usePushWalletContext,
  usePushChainClient,
  PushUI,
} from '@pushchain/ui-kit';

function UniversalCounterExample() {
  // Define Wallet Config
  const walletConfig = {
    network: PushUI.CONSTANTS.PUSH_NETWORK.TESTNET,
  };
  
  // Define Universal Counter ABI, taking minimal ABI for the demo
  const UCABI = [
    {
      "inputs": [],
      "name": "increment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "countEth",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "countPC",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "countSol",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
  ];

  // Contract address for the Universal Counter
  const CONTRACT_ADDRESS = '0x5A59a5Ac94d5190553821307F98e4673BF3c4a1D';

  function Component() {
    const { connectionStatus } = usePushWalletContext();
    const { pushChainClient } = usePushChainClient();
    
    // State to store counter values
    const [countEth, setCountEth] = useState(-1);
    const [countSol, setCountSol] = useState(-1);
    const [countPC, setCountPC] = useState(-1);
    const [isLoading, setIsLoading] = useState(false);
    const [txHash, setTxHash] = useState('');

    // Function to encode transaction data
    const getTxData = () => {
      return PushChain.utils.helpers.encodeTxData({
        abi: UCABI,
        functionName: 'increment',
      });
    };

    // Function to fetch counter values
    const fetchCounters = async () => {
      if (!pushChainClient) return;
      
      try {
        // Create a contract instance for read operations
        const provider = new ethers.JsonRpcProvider('https://evm.rpc-testnet-donut-node1.push.org/');
        const contract = new ethers.Contract(CONTRACT_ADDRESS, UCABI, provider);
        
        // Fetch counter values
        const ethCount = await contract.countEth();
        const solCount = await contract.countSol();
        const pcCount = await contract.countPC();
        
        // Update state
        setCountEth(Number(ethCount));
        setCountSol(Number(solCount));
        setCountPC(Number(pcCount));
      } catch (err) {
        console.error("Error fetching counter values:", err);
      }
    };

    // Fetch counter values on component mount and when connection status changes
    useEffect(() => {
      if (connectionStatus === PushUI.CONSTANTS.CONNECTION.STATUS.CONNECTED) {
        fetchCounters();
      }
    }, [connectionStatus, pushChainClient]);

    // Handle transaction to increment counter
    const handleSendTransaction = async () => {
      if (pushChainClient) {
        try {
          setIsLoading(true);
          const data = getTxData();
          
          const tx = await pushChainClient.universal.sendTransaction({
            to: CONTRACT_ADDRESS,
            value: BigInt(0),
            data: data
          });
          
          setTxHash(tx.hash);
          
          // Wait for transaction to be mined
          await tx.wait();
          
          // Refresh counter values
          await fetchCounters();
          setIsLoading(false);
        } catch (err) {
          console.error("Transaction error:", err);
          setIsLoading(false);
        }
      }
    };

    return (
      <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px'}}>
        <h2>Universal Counter Example</h2>
        
        <PushUniversalAccountButton />
          
        {connectionStatus !== PushUI.CONSTANTS.CONNECTION.STATUS.CONNECTED && (
          <p>Please connect your wallet to interact with the counter.</p>
        )}
        
        <div style={{display: 'flex', flexDirection: 'column', alignItems: 'center', gap: '12px', width: '100%', flexWrap: 'nowrap'}}>
          <h3>Total Universal Count: {countEth == -1 ? '...' : countEth + countSol + countPC}</h3>
          
          <div style={{display: 'flex', flexDirection: 'row', alignItems: 'center', justifyContent: 'space-around', gap: '12px', width: '100%'}}>
          
            <div className="counter-box">
              <h3>ETH Counter: {countEth == -1 ? '...' : countEth}</h3>
            </div>
            
            <div className="counter-box">
              <h3>Sol Counter: {countSol == -1 ? '...' : countSol}</h3>
            </div>
            
            <div className="counter-box">
              <h3>PC Counter: {countPC == -1 ? '...' : countPC}</h3>
            </div>
            
          </div>
        </div>
        
        {connectionStatus === PushUI.CONSTANTS.CONNECTION.STATUS.CONNECTED && (
          <div className="counter-container" style={{display: 'grid'}}>
            
            <button 
              className="increment-button" 
              onClick={handleSendTransaction}
              disabled={isLoading}
            >
              {isLoading ? 'Processing...' : 'Increment Counter'}
            </button>
            
            {txHash && (
              <div className="transaction-info" style={{display: 'grid'}}>
                <p>Transaction Hash: <code>{txHash}</code></p>
                <a href={pushChainClient.explorer.getTransactionUrl(txHash)} target="_blank">View in Explorer</a> 
                <button onClick={fetchCounters} className="refresh-button">
                  Refresh Counter Values
                </button>
              </div>
            )}
          </div>
        )}
        
      </div>
    );
  }

  return (
    <PushUniversalWalletProvider config={walletConfig}>
      <Component />
    </PushUniversalWalletProvider>
  );
}
```

