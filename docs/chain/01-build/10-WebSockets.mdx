---
id: docs-websocket
title: WebSocket
hide_title: true
slug: ./websocket
displayed_sidebar: pushChainSidebar
sidebar_position: 10
image: "/assets/docs/previews/docs_notifications_develop_fetch_chats--create_channel.png"
---

# WebSocket

Push Chain is fully EVMâ€‘compatible, so you can use any standard Ethereum tooling to receive realâ€‘time data. The examples below show how to connect to Push Chain over WebSocket with `viem` and listen for new blocks.

<head>
  <title>{`WebSocket | Push Chain | Push Documentation`}</title>
</head>

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Details from '@theme/Details';
import {
  ModalContainer,
  ModalSmall,
  ModalWrapper,
  AFocus,
} from '@site/src/css/SharedStyling';

## Initialize Viem Client

We will use the `viem` library to connect to the Push Chain network over WebSocket.

To learn how to connect `viem` to Push Chain, check out the [Initialize Viem SDK](../initialize-viem-chain) page.

<Tabs className="codetabs" groupId="code-examples">
  <TabItem value="js" attributes={{className: "codetab js"}} default>
```typescript
import { createPublicClient, http } from 'viem'
import { CONSTANTS } from '@pushchain/core'

// Create a public client for Push testnet
const viemClient = createPublicClient({
  chain: CONSTANTS.VIEM_PUSH_TESTNET,
  transport: http(),
})
```
</TabItem>
<TabItem value="react" attributes={{className: "codetab react"}} default>
```typescript
import { createPublicClient, http } from 'viem'
import { CONSTANTS } from '@pushchain/core'

// Create a public client for Push testnet
const viemClient = createPublicClient({
  chain: CONSTANTS.VIEM_PUSH_TESTNET,
  transport: http(),
})
```
</TabItem>
<TabItem value="reactnative" attributes={{className: "codetab reactnative"}} default>
```typescript
import { createPublicClient, http } from 'viem'
import { CONSTANTS } from '@pushchain/core'

// Create a public client for Push testnet
const viemClient = createPublicClient({
  chain: CONSTANTS.VIEM_PUSH_TESTNET,
  transport: http(),
})
```
</TabItem>
</Tabs>

## Subscribing to Block Updates

Use `watchBlocks` to stream new blocks in real time. The function returns an unsubscribe handle.

<Tabs className="codetabs" groupId="code-examples">
  <TabItem value="js" attributes={{className: "codetab js"}} default>
```typescript
const stop = viemClient.watchBlocks({
  onBlock: (block) => {
    console.log('ðŸ†•Â Block', block.number, block.hash)
  },
  onError: (err) => console.error('WebSocket error', err),
})
```
  </TabItem>

  <TabItem value="react" attributes={{className: "codetab react"}} default>
```typescript
const stop = viemClient.watchBlocks({
  onBlock: (block) => {
    console.log('ðŸ†•Â Block', block.number, block.hash)
  },
  onError: (err) => console.error('WebSocket error', err),
})
```
  </TabItem>

  <TabItem value="reactnative" attributes={{className: "codetab reactnative"}} default>
```typescript
const stop = viemClient.watchBlocks({
  onBlock: (block) => {
    console.log('ðŸ†•Â Block', block.number, block.hash)
  },
  onError: (err) => console.error('WebSocket error', err),
})
```
  </TabItem>
</Tabs>

## Unsubscribing from Block Updates

To stop listening for new blocks, call the `stop` function returned by `watchBlocks`.

<Tabs className="codetabs" groupId="code-examples">
  <TabItem value="js" attributes={{className: "codetab js"}} default>
```typescript
stop()  // stops the stream
```
  </TabItem>

  <TabItem value="react" attributes={{className: "codetab react"}} default>
```typescript
stop()  // stops the stream
```
  </TabItem>

  <TabItem value="reactnative" attributes={{className: "codetab reactnative"}} default>
```typescript
stop()  // stops the stream
```
  </TabItem>
</Tabs>

## Example: Filtering New Blocks for Specific Transactions

The snippet below watches every new block and prints the hash of transactions sent **from** a given address:

<Tabs className="codetabs" groupId="code-examples">
  <TabItem value="js" attributes={{className: "codetab js"}} default>
```typescript
const watchedAddress = '0x8a36C6358861F0CE1672B04345C9e2E6717Be946'.toLowerCase()

viemClient.watchBlocks({
  onBlock: (block) => {
    block.transactions
      .filter((tx) => tx.from?.toLowerCase() === watchedAddress)
      .forEach((tx) => console.log('Tx from watched address â†’', tx.hash))
  },
})
```
  </TabItem>
  <TabItem value="react" attributes={{className: "codetab react"}} default>
```typescript
const watchedAddress = '0x8a36C6358861F0CE1672B04345C9e2E6717Be946'.toLowerCase()

viemClient.watchBlocks({
  onBlock: (block) => {
    block.transactions
      .filter((tx) => tx.from?.toLowerCase() === watchedAddress)
      .forEach((tx) => console.log('Tx from watched address â†’', tx.hash))
  },
})
```
  </TabItem>
  <TabItem value="reactnative" attributes={{className: "codetab reactnative"}} default>
```typescript
const watchedAddress = '0x8a36C6358861F0CE1672B04345C9e2E6717Be946'.toLowerCase()

viemClient.watchBlocks({
  onBlock: (block) => {
    block.transactions
      .filter((tx) => tx.from?.toLowerCase() === watchedAddress)
      .forEach((tx) => console.log('Tx from watched address â†’', tx.hash))
  },
})
```
  </TabItem>
</Tabs>